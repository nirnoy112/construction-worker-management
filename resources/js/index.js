!function(){"use strict";
/*! *****************************************************************************
    Copyright (c) Microsoft Corporation.

    Permission to use, copy, modify, and/or distribute this software for any
    purpose with or without fee is hereby granted.

    THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
    REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
    AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
    INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
    LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
    OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
    PERFORMANCE OF THIS SOFTWARE.
    ***************************************************************************** */function e(e,t,n,i){return new(n||(n=Promise))((function(o,s){function r(e){try{c(i.next(e))}catch(e){s(e)}}function a(e){try{c(i.throw(e))}catch(e){s(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(r,a)}c((i=i.apply(e,t||[])).next())}))}class t{constructor(e){this.nativeRecognizerRunner=e}processImage(e){const t=this.nativeRecognizerRunner.processImage(e);return Promise.resolve(t)}reconfigureRecognizers(e,t){return new Promise((n,i)=>{try{this.nativeRecognizerRunner.reconfigureRecognizers(e,t),n()}catch(e){i(e)}})}setMetadataCallbacks(e){return this.nativeRecognizerRunner.setJSDelegate(e),Promise.resolve()}resetRecognizers(e){return this.nativeRecognizerRunner.resetRecognizers(e),Promise.resolve()}setDetectionOnlyMode(e){return this.nativeRecognizerRunner.setDetectionOnlyMode(e),Promise.resolve()}setClearTimeoutCallback(e){return this.nativeRecognizerRunner.setClearTimeoutCallback(e),Promise.resolve()}setCameraPreviewMirrored(e){return this.nativeRecognizerRunner.setCameraPreviewMirrored(e),Promise.resolve()}delete(){return this.nativeRecognizerRunner.delete(),this.nativeRecognizerRunner=null,Promise.resolve()}}class n{constructor(e){this.realWasmModule=e}newRecognizer(e,...t){const n=new this.realWasmModule[e](...t);return n.recognizerName=e,Promise.resolve(n)}createRecognizerRunner(e,n=!1,i={}){const o=new this.realWasmModule.RecognizerRunner(e,n,i);return Promise.resolve(new t(o))}}class i{constructor(e){this.mbWasmModule=new n(e)}}let o=0;class s{constructor(e){this.action=e,this.messageID=function(){const e=o;return o+=1,e}()}}let r=(()=>{class e extends s{constructor(t,n){super(e.action),this.wasmModuleName=t.wasmModuleName,this.licenseKey=t.licenseKey,this.userId=n,this.registerLoadCallback=null!=t.loadProgressCallback}}return e.action="init",e})();var a;!function(e){e[e.Any=0]="Any",e[e.Recognizer=1]="Recognizer"}(a||(a={}));let c=(()=>{class e extends s{constructor(t,n){super(e.action),this.className=t,this.params=n}}return e.action="createNewNativeObject",e})(),l=(()=>{class e extends s{constructor(t,n,i){super(e.action),this.recognizerHandles=t,this.allowMultipleResults=n,this.registeredMetadataCallbacks=i}}return e.action="createRecognizerRunner",e})(),d=(()=>{class e extends s{constructor(t,n){super(e.action),this.recognizerHandles=t,this.allowMultipleResults=n}}return e.action="reconfigureRecognizerRunner",e})(),u=(()=>{class e extends s{constructor(){super(e.action)}}return e.action="deleteRecognizerRunner",e})(),h=(()=>{class e extends s{constructor(t,n,i){super(e.action),this.objectHandle=t,this.methodName=n,this.params=i}}return e.action="invokeObject",e})(),m=(()=>{class e extends s{constructor(t){super(e.action),this.frame=t}getTransferrables(){return[this.frame.imageData.data.buffer]}}return e.action="processImage",e})(),g=(()=>{class e extends s{constructor(t){super(e.action),this.hardReset=t}}return e.action="resetRecognizers",e})();class R{constructor(){this.onDebugText=!1,this.onDetectionFailed=!1,this.onQuadDetection=!1,this.onPointsDetection=!1,this.onFirstSideResult=!1,this.onGlare=!1}}let b=(()=>{class e extends s{constructor(t){super(e.action),this.registeredMetadataCallbacks=t}}return e.action="registerMetadataCallbacks",e})(),v=(()=>{class e extends s{constructor(t){super(e.action),this.detectionOnlyMode=t}}return e.action="setDetectionOnly",e})(),w=(()=>{class e extends s{constructor(t){super(e.action),this.callbackNonEmpty=t}}return e.action="setClearTimeoutCallback",e})(),D=(()=>{class e extends s{constructor(t){super(e.action),this.cameraPreviewMirrored=t}}return e.action="setCameraPreviewMirrored",e})();var f,p,C,k;function y(e,t){return n=>{const i=n;i.success?e():t(i.error)}}function M(e,t){return n=>{const i=n;i.success?e(n):t(i.error)}}!function(e){e[e.onDebugText=0]="onDebugText",e[e.onDetectionFailed=1]="onDetectionFailed",e[e.onQuadDetection=2]="onQuadDetection",e[e.onPointsDetection=3]="onPointsDetection",e[e.onFirstSideResult=4]="onFirstSideResult",e[e.clearTimeoutCallback=5]="clearTimeoutCallback",e[e.onGlare=6]="onGlare"}(f||(f={}));class T{constructor(e,t,n){this.wasmSDKWorker=e,this.objectHandle=n,this.recognizerName=t}getRemoteObjectHandle(){return this.objectHandle}currentSettings(){return this.objectHandle<0?Promise.reject("Invalid object handle: "+this.objectHandle):new Promise((e,t)=>{const n=new h(this.objectHandle,"currentSettings",[]),i=M(t=>{e(t.result)},t);this.wasmSDKWorker.postMessage(n,i)})}updateSettings(e){return this.objectHandle<0?Promise.reject("Invalid object handle: "+this.objectHandle):new Promise((t,n)=>{const i=new h(this.objectHandle,"updateSettings",[{parameter:e,type:a.Any}]),o=y(t,n);this.wasmSDKWorker.postMessage(i,o)})}getResult(){return this.objectHandle<0?Promise.reject("Invalid object handle: "+this.objectHandle):new Promise((e,t)=>{const n=new h(this.objectHandle,"getResult",[]),i=M(t=>{e(t.result)},t);this.wasmSDKWorker.postMessage(n,i)})}delete(){return this.objectHandle<0?Promise.reject("Invalid object handle: "+this.objectHandle):new Promise((e,t)=>{const n=new h(this.objectHandle,"delete",[]),i=y(()=>{this.objectHandle=-1,e()},t);this.wasmSDKWorker.postMessage(n,i)})}}function F(e){const t=new R;return t.onDebugText=!!e.onDebugText,t.onDetectionFailed=!!e.onDetectionFailed,t.onPointsDetection=!!e.onPointsDetection,t.onQuadDetection=!!e.onQuadDetection,t.onFirstSideResult=!!e.onFirstSideResult,t.onGlare=!!e.onGlare,t}class P{constructor(e){this.deleted=!1,this.wasmSDKWorker=e}processImage(e){return this.deleted?Promise.reject("Recognizer runner is deleted. It cannot be used anymore!"):new Promise((t,n)=>{const i=new m(e),o=M(e=>{const n=e.recognitionState;t(n)},n);this.wasmSDKWorker.postTransferrableMessage(i,o)})}reconfigureRecognizers(e,t){return this.deleted?Promise.reject("Recognizer runner is deleted. It cannot be used anymore!"):new Promise((n,i)=>{const o=E(e),s=new d(o,t),r=y(n,i);this.wasmSDKWorker.postMessage(s,r)})}setMetadataCallbacks(e){return new Promise((t,n)=>{const i=new b(F(e)),o=y(t,n);this.wasmSDKWorker.postMessageAndRegisterCallbacks(i,e,o)})}resetRecognizers(e){return new Promise((t,n)=>{const i=new g(e),o=y(t,n);this.wasmSDKWorker.postMessage(i,o)})}setDetectionOnlyMode(e){return new Promise((t,n)=>{const i=new v(e),o=y(t,n);this.wasmSDKWorker.postMessage(i,o)})}setClearTimeoutCallback(e){return new Promise((t,n)=>{const i=new w(null!=e),o=y(t,n);this.wasmSDKWorker.registerClearTimeoutCallback(e),this.wasmSDKWorker.postMessage(i,o)})}setCameraPreviewMirrored(e){return new Promise((t,n)=>{const i=new D(e),o=y(t,n);this.wasmSDKWorker.postMessage(i,o)})}delete(){return this.deleted?Promise.reject("Recognizer runner is already deleted."):new Promise((e,t)=>{const n=new u,i=y(()=>{this.deleted=!0,e()},t);this.wasmSDKWorker.postMessage(n,i)})}}function E(e){const t=[];for(let n in e){const i=e[n];t.push(i.getRemoteObjectHandle())}return t}class S{constructor(e){this.wasmSDKWorker=e}createRecognizerRunner(e,t=!1,n={}){return new Promise((i,o)=>{const s=E(e),r=new l(s,t,F(n)),a=y(()=>{i(new P(this.wasmSDKWorker))},o);this.wasmSDKWorker.postMessageAndRegisterCallbacks(r,n,a)})}newRecognizer(e,...t){return new Promise((n,i)=>{const o=new c(e,function(e){const t=[];for(let n in e){let i=e[n],o=a.Any;i instanceof T&&(o=a.Recognizer,i=i.getRemoteObjectHandle()),t.push({parameter:i,type:o})}return t}(t)),s=M(t=>{n(new T(this.wasmSDKWorker,e,t.objectHandle))},i);this.wasmSDKWorker.postMessage(o,s)})}}class I{constructor(e,t){this.eventHandlers={},this.metadataCallbacks={},this.clearTimeoutCallback=null,this.mbWasmWorker=e,this.mbWasmWorker.onmessage=e=>{this.handleWorkerEvent(e)},this.mbWasmModule=new S(this),this.loadCallback=t}postMessage(e,t){this.eventHandlers[e.messageID]=t,this.mbWasmWorker.postMessage(e)}postTransferrableMessage(e,t){this.eventHandlers[e.messageID]=t,this.mbWasmWorker.postMessage(e,e.getTransferrables())}postMessageAndRegisterCallbacks(e,t,n){this.eventHandlers[e.messageID]=n,this.metadataCallbacks=t,this.mbWasmWorker.postMessage(e)}registerClearTimeoutCallback(e){this.clearTimeoutCallback=e}handleWorkerEvent(e){if("isCallbackMessage"in e.data){const t=e.data;switch(t.callbackType){case f.onDebugText:this.metadataCallbacks.onDebugText(t.callbackParameters[0]);break;case f.onDetectionFailed:this.metadataCallbacks.onDetectionFailed();break;case f.onPointsDetection:this.metadataCallbacks.onPointsDetection(t.callbackParameters[0]);break;case f.onQuadDetection:this.metadataCallbacks.onQuadDetection(t.callbackParameters[0]);break;case f.onFirstSideResult:this.metadataCallbacks.onFirstSideResult();break;case f.clearTimeoutCallback:this.clearTimeoutCallback.onClearTimeout();break;case f.onGlare:this.metadataCallbacks.onGlare(t.callbackParameters[0]);break;default:throw new Error("Unknown callback type "+t.callbackType)}}else if("isLoadProgressMessage"in e.data){const t=e.data;this.loadCallback(t.progress)}else{const t=e.data,n=this.eventHandlers[t.messageID];delete this.eventHandlers[t.messageID],n(t)}}static createWasmWorker(t,n,i){return e(this,void 0,void 0,(function*(){return new Promise((e,o)=>{const s=new I(t,n.loadProgressCallback),a=new r(n,i),c=y(()=>{e(s)},o);s.postMessage(a,c)})}))}}let A;!function(e){e[e.RotatedLeft90=0]="RotatedLeft90",e[e.NoRotation=1]="NoRotation",e[e.RotatedRight90=2]="RotatedRight90",e[e.Rotated180=3]="Rotated180"}(p||(p={})),function(e){e[e.Empty=0]="Empty",e[e.Uncertain=1]="Uncertain",e[e.Valid=2]="Valid"}(C||(C={})),function(e){e[e.Fail=0]="Fail",e[e.Success=1]="Success",e[e.CameraTooHigh=2]="CameraTooHigh",e[e.FallbackSuccess=3]="FallbackSuccess",e[e.Partial=4]="Partial",e[e.CameraAtAngle=5]="CameraAtAngle",e[e.CameraTooNear=6]="CameraTooNear",e[e.DocumentTooCloseToEdge=7]="DocumentTooCloseToEdge"}(k||(k={}));class W{constructor(e,t,n){this.imageData=e,this.orientation=t,this.videoFrame=n}}var z,N,H;!function(e){e[e.BackFacingCamera=0]="BackFacingCamera",e[e.FrontFacingCamera=1]="FrontFacingCamera"}(z||(z={})),function(e){e.MediaDevicesNotSupported="MediaDevicesNotSupported",e.CameraNotFound="CameraNotFound",e.CameraNotAllowed="CameraNotAllowed",e.CameraInUse="CameraInUse",e.CameraNotAvailable="CameraNotAvailable"}(N||(N={}));class O extends Error{constructor(e,...t){super(...t),this.reason=e,this.name="VideoRecognizerError"}}!function(e){e[e.Recognition=0]="Recognition",e[e.RecognitionTest=1]="RecognitionTest",e[e.DetectionTest=2]="DetectionTest"}(H||(H={}));class _{constructor(e,t){this.videoFeed=null,this.cancelled=!1,this.timedOut=!1,this.recognitionPaused=!1,this.recognitionTimeoutMs=3e4,this.timeoutID=0,this.videoRecognitionMode=H.Recognition,this.onScanningDone=null,this.videoFeed=e,this.recognizerRunner=t}static createVideoRecognizerFromCameraStream(t,n,i=z.BackFacingCamera){return e(this,void 0,void 0,(function*(){return new Promise((o,s)=>e(this,void 0,void 0,(function*(){if(navigator.mediaDevices&&navigator.mediaDevices.getUserMedia)try{const r=yield function(t){return e(this,void 0,void 0,(function*(){let e=[],n=[];{let t=yield navigator.mediaDevices.enumerateDevices();if(t.filter(e=>"videoinput"===e.kind).every(e=>""===e.label)){const e=yield navigator.mediaDevices.getUserMedia({video:{facingMode:{ideal:"environment"}},audio:!1});t=yield navigator.mediaDevices.enumerateDevices(),e.getTracks().forEach(e=>e.stop())}const i=t.filter(e=>"videoinput"===e.kind);for(let t in i){const o=i[t];x(o.label)?n.push(new K(o,z.BackFacingCamera)):e.push(new K(o,z.FrontFacingCamera))}}if(e.length>0||n.length>0){let i=n.length>0?n:e;t===z.BackFacingCamera&&n.length>0&&(i=n),t===z.FrontFacingCamera&&e.length>0&&(i=e),i=i.sort((e,t)=>e.label.localeCompare(t.label));{let e=0;const t=i.map(e=>{const t=e.label.match(/\b([0-9]+)MP?\b/i);return null!=t?parseInt(t[1],10):NaN});return t.some(e=>isNaN(e))||(e=t.lastIndexOf(Math.max(...t))),i[e]}}return null}))}(i);if(null==r)return void s(new O(N.CameraNotFound));const a={audio:!1,video:{width:{min:640,ideal:1920,max:1920},height:{min:480,ideal:1080,max:1080}}};""===r.deviceId?a.video.facingMode={ideal:i===z.BackFacingCamera?"environment":"user"}:a.video.deviceId={exact:r.deviceId};const c=yield navigator.mediaDevices.getUserMedia(a);t.controls=!1,t.srcObject=c,r.facing==z.FrontFacingCamera&&(t.style.transform="scaleX(-1)"),yield n.setCameraPreviewMirrored(r.facing==z.FrontFacingCamera),o(new _(t,n))}catch(e){let t=N.CameraInUse;switch(e.name){case"NotFoundError":case"OverconstrainedError":t=N.CameraNotFound;break;case"NotAllowedError":case"SecurityError":t=N.CameraNotAllowed;break;case"AbortError":case"NotReadableError":t=N.CameraNotAvailable;break;case"TypeError":throw e}s(new O(t,e.message))}else s(new O(N.MediaDevicesNotSupported))})))}))}static createVideoRecognizerFromVideoPath(t,n,i){return e(this,void 0,void 0,(function*(){return new Promise(e=>{n.src=t,n.currentTime=0,n.onended=()=>{o.cancelRecognition()};const o=new _(n,i);e(o)})}))}setVideoRecognitionMode(t){return e(this,void 0,void 0,(function*(){this.videoRecognitionMode=t,yield this.recognizerRunner.setDetectionOnlyMode(this.videoRecognitionMode===H.DetectionTest)}))}startRecognition(e,t=3e4){if(null==this.videoFeed)throw new Error("The associated video feed has been released!");if(!this.videoFeed.paused)throw new Error("The associated video feed is not paused. Use resumeRecognition instead!");this.cancelled=!1,this.recognitionPaused=!1,this.clearTimeout(),this.recognitionTimeoutMs=t,this.onScanningDone=e,this.recognizerRunner.setClearTimeoutCallback({onClearTimeout:()=>this.clearTimeout()}),this.videoFeed.play().then(()=>this.playPauseEvent(),()=>{alert("Auto-play prevented by browser security rules! Please start video manually!"),this.videoFeed.controls=!0,this.videoFeed.addEventListener("play",()=>this.playPauseEvent()),this.videoFeed.addEventListener("pause",()=>this.playPauseEvent())})}recognize(t=3e4){return e(this,void 0,void 0,(function*(){return new Promise((e,n)=>{try{this.startRecognition(t=>{this.pauseVideoFeed(),e(t)},t)}catch(e){n(e)}})}))}cancelRecognition(){this.cancelled=!0}pauseVideoFeed(){this.pauseRecognition(),this.videoFeed.pause()}pauseRecognition(){this.recognitionPaused=!0}resetRecognizers(t){return e(this,void 0,void 0,(function*(){yield this.recognizerRunner.resetRecognizers(t)}))}getRecognizerRunner(){return this.recognizerRunner}resumeRecognition(t){if(this.cancelled=!1,this.timedOut=!1,this.recognitionPaused=!1,this.videoFeed.paused)throw new Error("Cannot resume recognition while video feed is paused! You need to use recognize or startRecognition");setTimeout(()=>e(this,void 0,void 0,(function*(){t&&(yield this.resetRecognizers(!0)),this.recognitionLoop()})),1)}releaseVideoFeed(){null!=this.videoFeed&&(null!=this.videoFeed.srcObject&&(this.videoFeed.paused||this.cancelRecognition(),this.videoFeed.srcObject.getTracks().forEach(e=>e.stop()),this.videoFeed.srcObject=null),this.videoFeed=null)}playPauseEvent(){this.videoFeed.paused?this.cancelRecognition():this.resumeRecognition(!0)}recognitionLoop(){return e(this,void 0,void 0,(function*(){const e=function(e){let t,n,i=!1;if(e instanceof HTMLVideoElement)t=e.videoWidth,n=e.videoHeight,i=!0;else if(e instanceof HTMLImageElement)t=e.naturalWidth,n=e.naturalHeight;else{if(e instanceof SVGImageElement)throw new Error("Recognition of SVG elements not supported!");t=e.width,n=e.height}A=A||document.createElement("canvas"),A.width=t,A.height=n;const o=A.getContext("2d");o.drawImage(e,0,0,A.width,A.height);let s=o.getImageData(0,0,A.width,A.height);return new W(s,p.NoRotation,i)}(this.videoFeed),t=yield this.recognizerRunner.processImage(e);t==C.Valid||this.cancelled||this.timedOut?this.videoRecognitionMode==H.Recognition||this.cancelled?(this.clearTimeout(),this.onScanningDone(t)):(yield this.recognizerRunner.resetRecognizers(!0),this.clearTimeout()):t!=C.Empty&&0==this.timeoutID&&(this.timeoutID=window.setTimeout(()=>{this.timedOut=!0},this.recognitionTimeoutMs)),this.recognitionPaused||setTimeout(()=>{this.recognitionLoop()},1)}))}clearTimeout(){this.timeoutID>0&&(window.clearTimeout(this.timeoutID),this.timeoutID=0)}}const j=["rear","back","rück","arrière","trasera","trás","traseira","posteriore","后面","後面","背面","后置","後置","背置","задней","الخلفية","후","arka","achterzijde","หลัง","baksidan","bagside","sau","bak","tylny","takakamera","belakang","אחורית","πίσω","spate","hátsó","zadní","darrere","zadná","задня","stražnja","belakang","बैक"];function x(e){const t=e.toLowerCase();return j.some(e=>t.includes(e))}class K{constructor(e,t){this.deviceId=e.deviceId,this.facing=t,this.groupId=e.groupId,this.label=e.label}}class B{constructor(e){this.useWebWorker=!0,this.wasmModuleName="BlinkIDWasmSDK",this.loadProgressCallback=null,this.licenseKey=e}}function Y(){let e=localStorage.getItem("mb-user-id");return null==e&&(e=([1e7]+-1e3+-4e3+-8e3+-1e11).replace(/[018]/g,e=>(e^crypto.getRandomValues(new Uint8Array(1))[0]&15>>e/4).toString(16)),localStorage.setItem("mb-user-id",e)),e}var V,L,U;!function(e){e[e.NONE=0]="NONE",e[e.QR_CODE=1]="QR_CODE",e[e.DATA_MATRIX=2]="DATA_MATRIX",e[e.UPC_E=3]="UPC_E",e[e.UPC_A=4]="UPC_A",e[e.EAN_8=5]="EAN_8",e[e.EAN_13=6]="EAN_13",e[e.CODE_128=7]="CODE_128",e[e.CODE_39=8]="CODE_39",e[e.ITF=9]="ITF",e[e.AZTEC_BARCODE=10]="AZTEC_BARCODE",e[e.PDF417_BARCODE=11]="PDF417_BARCODE"}(V||(V={})),function(e){e[e.None=0]="None",e[e.AAMVACompliant=1]="AAMVACompliant",e[e.ArgentinaID=2]="ArgentinaID",e[e.ArgentinaDL=3]="ArgentinaDL",e[e.ColombiaID=4]="ColombiaID",e[e.ColombiaDL=5]="ColombiaDL",e[e.NigeriaVoterID=6]="NigeriaVoterID",e[e.NigeriaDL=7]="NigeriaDL",e[e.PanamaID=8]="PanamaID",e[e.SouthAfricaID=9]="SouthAfricaID"}(L||(L={})),function(e){e[e.MRTD_TYPE_UNKNOWN=0]="MRTD_TYPE_UNKNOWN",e[e.MRTD_TYPE_IDENITY_CARD=1]="MRTD_TYPE_IDENITY_CARD",e[e.MRTD_TYPE_PASSPORT=2]="MRTD_TYPE_PASSPORT",e[e.MRTD_TYPE_VISA=3]="MRTD_TYPE_VISA",e[e.MRTD_TYPE_GREEN_CARD=4]="MRTD_TYPE_GREEN_CARD",e[e.MRTD_TYPE_MYS_PASS_IMM13P=5]="MRTD_TYPE_MYS_PASS_IMM13P"}(U||(U={}));const G=document.getElementById("loadingScreen"),Q=document.getElementById("loadProgress");if(function(){try{if("object"==typeof WebAssembly&&"function"==typeof WebAssembly.instantiate){const e=new WebAssembly.Module(Uint8Array.of(0,97,115,109,1,0,0,0));if(e instanceof WebAssembly.Module)return new WebAssembly.Instance(e)instanceof WebAssembly.Instance}}catch(e){}return!1}()){const t=new B(function(){if("localhost"==window.location.hostname)return"sRwAAAYJbG9jYWxob3N0r/lOPig/w35CpJnWKlq+ZJzK3xccLSIruDSb18DHmilDcTBqO8JYgpsBzoirfhucxge8mE9wKDIMLG3GeVOJn1Qm/IMDjREWfwQKIleuJxnFSDflBbooYUnf/zNDuoQgDXAoscf+qBbbEt6yC17HVB17UZBT/fRgEDym6D9fDTHVJOkUs2Ai1ZNsNAYQBMQx0pE3zxV4FO7YUGedd3nKdURvFKbOs002Cnev+G4Kqge7Gy+F3eIjRJHdEw+/pFO5i1/U+7pMLzSneyVWgijA";if("blinkid.github.io"==window.location.hostname)return"sRwAAAYRYmxpbmtpZC5naXRodWIuaW+qBF9hW4YlTvZbRuaFVwbiD8KZM6KyFj+Gxuno9ppVrGWjCzH3zaPlD0Rrt/nEJcExVA8saYUOqtODKxAki0rsatzpBjyHuWpAGQeoi49aIwCqsNGA9H8Em/IbR5sBgIu0bR94Oi/mfL0eG9F76UgX2T8cTiRGHdqE+b4u+qYvTwy5lAOESIWjb3fCYdHip9KmPxp9KHvS5veYCHYWKHH6cqXvSuhhM/JtXTdFW1UZ3VcF05Nfjx2Rp5ck+LHB9B/2vlNafX8qq6WM7UcoMc8=";throw new Error("No license key for "+window.location.hostname)}());t.loadProgressCallback=e=>{Q.value=e},function(t){return e(this,void 0,void 0,(function*(){return new Promise((n,o)=>e(this,void 0,void 0,(function*(){if(null===t.licenseKey||void 0===t.licenseKey)return void o("Missing license key!");if(!t.wasmModuleName)return void o("Missing WASM module name!");const e=Y();if(t.useWebWorker)try{const i=yield I.createWasmWorker(new Worker("http://localhost/ohs/resources/js/MicroblinkSDK.worker.js"),t,e);n(i)}catch(e){o(e)}else{const s=self[t.wasmModuleName];let r=void 0;null!=t.loadProgressCallback&&(r={setStatus:e=>{t.loadProgressCallback(function(e){if("Running..."==e)return 100;if(0==e.length)return 0;const t=e.match(/([^(]+)\((\d+(\.\d+)?)\/(\d+)\)/);if(t){return 100*parseInt(t[2])/parseInt(t[4])}return console.debug("Cannot parse emscripten status: ",e),NaN}(e))}}),s(r).then(s=>{try{return s.initializeWithLicenseKey(t.licenseKey,e),void n(new i(s))}catch(e){return void o(e)}},e=>{console.log("Failed to load WASM. Reason: "+e),o(e)})}})))}))}(t).then(e=>{console.log("WASM loaded successfully!"),G.hidden=!0,document.getElementById("btnStart").hidden=!1;const t=new q(e);window.app=t},e=>{console.error("Failed to load WASM! Reason: "+e),alert("Failed to load WASM! Reason: "+e),G.innerHTML="<h1>Failed to load WASM! Reason: "+e+"</h1>"})}else G.innerHTML="<h1>Your browser is not supported by this SDK! <h1/>";class q{constructor(e){this.wasmSDK=e,this.detectionResult=document.getElementById("cameraFeedback"),this.cameraFeed=document.getElementById("cameraFeed"),this.drawContext=this.detectionResult.getContext("2d")}startScanning(){return e(this,void 0,void 0,(function*(){const t=yield function(t){return e(this,void 0,void 0,(function*(){return t.mbWasmModule.newRecognizer("MrtdRecognizer")}))}(this.wasmSDK),n=yield function(t){return e(this,void 0,void 0,(function*(){return t.mbWasmModule.newRecognizer("IdBarcodeRecognizer")}))}(this.wasmSDK),i={onQuadDetection:e=>{this.drawQuad(e)}},o=yield function(t,n,i=!1,o={}){return e(this,void 0,void 0,(function*(){return t.mbWasmModule.createRecognizerRunner(n,i,o)}))}(this.wasmSDK,[t,n],!1,i),s=yield _.createVideoRecognizerFromCameraStream(this.cameraFeed,o);document.getElementById("btnStart").hidden=!0,document.getElementById("cameraMessage").hidden=!1;if((yield s.recognize())!=C.Empty){let e="";const i=yield t.getResult();i.state!=C.Empty&&(console.log(i),e+="Hello, "+i.mrzResult.secondaryID+" "+i.mrzResult.primaryID+"! You were born on "+i.mrzResult.dateOfBirth.year+"-"+i.mrzResult.dateOfBirth.month+"-"+i.mrzResult.dateOfBirth.day+"!\n");const o=yield n.getResult();o.state!=C.Empty&&(console.log(o),e+="Hello, "+o.firstName+" "+o.lastName+"! You were born on "+o.dateOfBirth.year+"-"+o.dateOfBirth.month+"-"+o.dateOfBirth.day+"!\n"),0!=e.length&&alert(e)}s.releaseVideoFeed(),o.delete(),t.delete(),n.delete(),document.getElementById("btnStart").hidden=!1,document.getElementById("cameraMessage").hidden=!0,this.clearDrawCanvas()}))}drawQuad(e){this.clearDrawCanvas(),this.setupColor(e);const t=this.drawContext;this.applyTransform(t,e.transformMatrix),t.beginPath(),t.moveTo(e.topLeft.x,e.topLeft.y),t.lineTo(e.topRight.x,e.topRight.y),t.lineTo(e.bottomRight.x,e.bottomRight.y),t.lineTo(e.bottomLeft.x,e.bottomLeft.y),t.closePath(),t.stroke()}applyTransform(e,t){const n=this.detectionResult.width/this.detectionResult.height,i=this.cameraFeed.videoWidth/this.cameraFeed.videoHeight;let o=0,s=0,r=0,a=0;n>i?(r=this.detectionResult.height,a=i*r,o=(this.detectionResult.width-a)/2):(a=this.detectionResult.width,r=a/i,s=(this.detectionResult.height-r)/2),e.translate(o,s),e.scale(a/this.cameraFeed.videoWidth,r/this.cameraFeed.videoHeight),e.transform(t[0],t[3],t[1],t[4],t[2],t[5])}clearDrawCanvas(){this.detectionResult.width=this.detectionResult.clientWidth,this.detectionResult.height=this.detectionResult.clientHeight,this.drawContext.clearRect(0,0,this.detectionResult.width,this.detectionResult.height)}setupColor(e){const t=this.drawContext;let n="#FFFF00FF";e.detectionStatus==k.Fail?n="#FF0000FF":e.detectionStatus==k.Success&&(n="#00FF00FF"),t.fillStyle=n,t.strokeStyle=n,t.lineWidth=5}}}();
//# sourceMappingURL=index.js.map
